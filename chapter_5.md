# 4장 반복 찾기

이번 장에서는 여러번 반복해 나타나는 문자나 문자 집합을 어떻게 찾는지 알아보겠습니다.

## 몇 번 일치하는가?

지금까지 공부한 것을 토대로 이메일 주소와 일치하는 패턴을 찾아봅시다. 이메일의 기본 형식은 다음과 같습니다.

```text
text@text.text
t@t.t
```

이것은 `ex/5_1.txt`에 들어 있습니다. 다음과 같이 확인하면 됩니다.

```bash
bat ex/5_1.txt
```

앞에서 배운 것을 토대로 이메일을 주소를 찾기 위해서 다음과 같은 패턴을 만들 수 있습니다.

- 정규 표현식: `\w@\w\.\w`

이 정규 표현식을 사용해봅시다.

```bash
rg '\w@\w.\w' ex/5_1.txt
```

우리가 예상한 것은 이메일 전체 문장을 다 선택해 주기를 원했지만 위의 코드를 실행하면 첫 번째 줄은 `t@tex`만 선택하고, 2번째 줄은 `t@t.t`을 찾은 것을 확인할 수 있습니다. 왜냐하면 위의 정규표현식은 단지 아래와 같이 1 글자씩만 있는 것에만 일치하고 있기 때문입니다. 다시 말해 `\w`은 문자 1개만 일치하는 패턴이기 때문입니다. 그렇기 때문에 1번째 줄을 이메일 주소 전체를 정확하게 선택하지 못하고 2번째 줄은 정확하게 선택하고 있습니다.

### 문자 하나 이상 찾기

그러면 앞에서 한 문자가 아니라 `@`앞에 있는 문자열, `@`과 `.` 사이에 있는 문자열, `.` 뒤에 있는 문자열, 즉 여러 개의 문자열을 찾으려면 어떻게 해야 할까요? 하나 이상의 문자열을 찾기 위해서는 문자 뒤에 `+`를 븉이면 됩니다. 예를 들어 `a`는 `a`라는 한 글자를 찾지만 `a+`는 하나 이상 `a`가 연속적으로 있는 것을 찾습니다. 그리고 `[0-9]`는 숫자 1개를 찾지만, `[0-9]+`은 하나 이상 숫자가 연속적으로 있는 것을 찾습니다. 참고로 `[0-9+]`과 같이 하면 다른 결과가 나오게 됩니다. 이 패턴을 단순히 이야기하면 `[0,1,2,3,4,5,6,7,8,9,+]`와 일치하는 것을 찾는 패턴입니다. 참고로 `+` 문자를 찾으려고 한다면, 이스케이프 문자를 포함한 `\+`을 이용하면 됩니다.

정규 표현식: `+`: 하나 이상을 찾는다, 보기: `[0-9]+`, `w+`

다음과 같이 이메일 주소가 들어 있는 문자열에서 이메일 주소를 찾아보겠습니다.

```text
Send personal email to ben@forta.com. For questions about a book use support@forta.com. Feel free to send unsolicited email to spam@forta.com(wouldn't it be nice if it were that simple, huh?).
```

이것은 `ex/5_2.txt`에 들어 있습니다. 다음과 같이 확인하면 됩니다.

```bash
bat ex/5_2.txt
```

```bash
rg '\w+@\w+.\w+' ex/5_2.txt
```
