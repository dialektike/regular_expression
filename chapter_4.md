# 4장 메타 문자 사용하기

이번 장에서는 특별한 문자나 문자형(type)과 일치하는 메타 문자를 더 알아보겠습니다.

## 이스케이프 다시 살펴보기

지금까지 공부한 것을 토대로, 만약 메타 문자인 `[`과 `]`을 포함하는 문자열을 찾기 위해서는 `\`이라는 메타 문자를 사용하면 됩니다.

- 정규 표현식: `myArray\[0\]`

```txt
var myArray = new Array();

if (myArray[0] == 0) {
    print()
}
```

이 목록은 `ex/4_1.txt`에 들어 있습니다. 다음과 같이 확인하면 됩니다.

```bash
bat ex/4_1.txt
```

```bash
rg 'myArray\[0\]' ex/4_1.txt
```

만약 `myArray[1]`, `myArray[2]`과 같은 것도 일치한다고 찾으려면 다음과 같이 하면 될 것 같습니다.

```bash
rg 'myArray\[0-9\]' ex/4_1.txt
```

그러나 위와 같이 실행하면 아뭇 것도 찾지 못 합니다. 다음과 같이 해야 됩니다.

```bash
rg 'myArray\[[0-9]\]' ex/4_1.txt
```

만약 `\`을 찾고자 한다면 `\\`을 사용하면 됩니다. 예를 들어 다음과 같은 문자열을 살펴봅시다.

```txt
\home\ben\sales1\
```

이 문자열은 `ex/4_2.txt`에 들어 있습니다. 다음과 같이 확인하면 됩니다.

```bash
bat ex/4_2.txt
```

여기서 `\`을 다 찾으려면 앞에서 말한 것처럼 다음과 같이 하면 됩니다.

```bash
rg '\\' ex/4_2.txt
```

만약 `\`과 같이 하면 에러가 발생합니다.

## 공백문자 찾기

메타 문자는 일반적으로 두 가지 범주로 분류합니다.

1.마침표(.)처럼 텍스트와 일치하는 문자
2. 여는 대괄호([)난 닫는 대괄호(])와 같이 정규 표현식 문법의 일부로 쓰이는 문자

이번에는 눈에는 보이지 않지만 텍스트에 포함되어 있는 공백 문자를 찾아봅시다. 이런 것을 처리하기 위해서는 아래와 같은 메타 문자를 사용하면 됩니다.

- `[\b]`: 역스페이스
- `\f`: 페이지 넘김
- `\n`: 줄바꿈
- `\r`: 케리지 리턴
- `\t`: 탭
- `\v`: 수직 탭

참고로 위의 문자들은 `\`과 함께 쓰지 않으면, 즉 `n`과 같이 사용하면 문자 그대로를 찾게 됩니다. 그러나 `[`과 같은 것은 `\`과 함께 써야 문자 그대로를 찾게 됩니다.

다음과 같은 `csv` 형식의 문자열을 살펴봅시다.

```txt
"101","Ben","Forta"
"102","Jim","James"

"103","Roberta","Robertson"
"104","B0b","Bobson"
```

이 문자열은 `ex/4_3.txt`에 들어 있습니다. 다음과 같이 확인하면 됩니다.

```bash
bat ex/4_3.txt
```

여기서 빈줄을 찾으려면 다음과 같이 하면 됩니다. 줄바꿈이 연속적으로 2번이나 있다는 것은 빈줄이 있다는 것을 뜻하기 때문에 이렇게 하면 빈줄을 찾을 수 있습니다.

```bash
rg '\n\n' ex/4_3.txt
```

만약 윈도우에서 하고자 한다면 다음과 같이 `\r`도 함께 사용해야 합니다. 윈도우은 `\r\n`이 줄바꿈을 뜻합니다.

여기서 빈줄을 찾으려면 다음과 같이 하면 됩니다.

```bash
rg '\r\n\r\n' ex/4_3.txt
```

## 특정한 문자 형태와 일치시키기

지금까지 특정 문자, 모든 문자(마침표(`.`)를 사용), 문자 집합 가운데 하나(대괄호
(`[]`)를 사용)를 어떻게 찾아봤고, 어떻게 특정 문자를 제외하는지도(캐럿(`^`) 사용) 살펴봤다. 특정 문자 집합(집합 속에서 하나와 일치)은 검색에서 쓰는 가장 흔한 형태이기에, 자주 쓰는 문자 집합들은 특수한 메타 문자로 대신하기도 한다. 이런 메타 문자들을 문자 클래스(chases of characters)라고 부른다.

### 숫자와 숫자가 아닌 문자 찾기

- `\d`: 숫자 하나
- `\D`: 숫자를 제외한 문자 하나, `[^0-9]`와 같습니다.

참고로 정규표현식은 대소문자를 구별합니다. 일반적으로 소문자와 대문자는 서로 반대 기능을 하는 경우가 많습니다.

앞에서 사용했던 `4_1.txt`으로 연습해 봅시다. 내용은 다음과 같습니다.

```txt
var myArray = new Array();

if (myArray[0] == 0) {
    print()
}
```

앞에서는 다음과 같이 했습니다.

```bash
rg 'myArray\[[0-9]\]' ex/4_1.txt
```

다음과 같이 해도 동일한 결과를 낼 수 있습니다.

- 정규 표현식: `myArray\[\d\]`

```bash
rg 'myArray\[\d\]' ex/4_1.txt
```

만약 다음과 같은 문자열이 있다면, 이땐 어떻게 `10`을 찾을 수 있을까요?

```txt
var myArray = new Array();

if (myArray[10] == 0) {
    print()
}
```

이것은 `ex/4_4.txt`에 들어 있습니다. 다음과 같이 확인하면 됩니다.

```bash
bat ex/4_4.txt
```

이런 경우에는 다음과 같이 숫자를 2자리로 지정해야 합니다.

- 정규 표현식: `myArray\[\d\d\]`

```bash
rg 'myArray\[\d\d\]' ex/4_4.txt 
```

물론 이것은 다음 것과 똑같이 동작합니다.

- 정규 표현식: `myArray\[[0-9][0-9]\]`

참고하세요.

### 영숫자 문자와 영숫자가 아닌 문자 찾기

여기서 영숫자는 영어로 'alphanumeric'을 말하면, 이는 대문자와 소문자를 포함한 알파벳 A부터 Z, 숫자, 밑줄을 포함하는 것을 말합니다.

- `\w`: 즉 `[a-zA-Z0-9_]`
- `\D`: 즉 `[^a-zA-Z0-9_]`

다음과 같이 미국과 캐나다의 우편번호를 포함한 문자열이 있습니다.

```txt
11213
A1C2E3
48075
48237
M1B4F2
90046
H1H2H2
```

이것은 `ex/4_5.txt`에 들어 있습니다. 다음과 같이 확인하면 됩니다.

```bash
bat ex/4_5.txt
```

여기서 알파벳과 숫자가 번갈아 나오는 것이 케나다 우편 번호인데 그것만 찾아 봅시다.

- 정규 표현식: `\w\d\w\d\w\d`

```bash
rg '\w\d\w\d\w\d' ex/4_5.txt 
```

어떻게 보면 좀 이상하지만 잘 작동한다.

### 공백 문자와 공백이 아닌 문자 찾기

- `\S`: 모든 공백 문자 즉 `[\f\n\r\t\v]`
- `\D`: 공백 문자가 아닌 모든 문자 즉 `[^\f\n\r\t\v]`

## 포직스 문자 클래스 사용하기

포직스 문자 클래스는 줄여쓰기를 나타내는 또 다른 형태인데 많은 정규 표현식을 구현한 곳에서 지원합니다.

- `[:alnum:]`: 모든 영숫자(`[a-ZA-Z0-9]`와 같다)
- `[:alpha:]`: 모든 영문자(`[a-zA-Z]`와 같다)
- `[:blank:]`: 빈칸(space)이나 탭 문자(`[\t]`와 같다)
- `[:cntrl:]`: 아스키 제어문자(아스키 0번부터 31, 127번)
- `[:digit:]`: 모든 한 자리 숫자(`[0-9]`와 같다)
- `[:graph:]`: `[:print :]`와 동일하나 빈칸(space)은 제외
- `[:lower:]`: 모든 소문자(`[a-z]`와 같다)
- `[:print:]`: 출력 가능한 모든 문자
- `[:punct:]`: `[:alnum:]`이나 `[:cntr1:]`가 포함되지 않은 모든 문자
- `[:space:)`: 빈칸을 포함한 모든 공백 문자(`[\f\n\r\t\v]`와 같다)
- `[:upper:]`: 모든 대문자(`[A-Z]`와 같다)
- `[:xdigit:]`: 모든 16진수 숫자(`[a-fA-F0-9]`와 같다)

3장에서 했던 `html`에서 포직스 문자 클래스를 이용해 RGB 값만 찾아 보겠습니다.

```html
<BODY BCOLOR="#336633" TEXT="#FFFFFF"
MARGINWIDTH="®" MARGINHEIGHT="®" TOPMARGIN="®"
LEFTMARGIN="®">
```

이것은 `ex/3_5.html`에 들어 있습니다. 다음과 같이 확인하면 됩니다.

```bash
bat ex/3_5.html
```

포직스 문자 클래스를 사용할 때에는 다음과 같이 대괄호를 사용해야 합니다.

```bash
rg '[[:xdigit:]][[:xdigit:]][[:xdigit:]][[:xdigit:]][[:xdigit:]][[:xdigit:]]' ex/3_5.txt 
```

3장에서 `[0-9A-Fa-f]`을 6번 반복한 것처럼 `[[:xdigit:]]`을 6번 반복하고 있습니다.
